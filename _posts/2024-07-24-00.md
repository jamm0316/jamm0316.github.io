page link : [https://www.acmicpc.net/problem/11660](https://www.acmicpc.net/problem/11660)

# í’€ì´ì „ëµ

> [!tip]
> ğŸ’¡ í’€ì´ì „ëµ
> 1. ì¸ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤
>     1. N: ë°°ì—´ì˜ ê¸¸ì´(ì •ì‚¬ê°í˜•), queries: ì¿¼ë¦¬ì˜ ê°¯ìˆ˜, Array: ì£¼ì–´ì§„ ë°°ì—´
> 2. ë°°ì—´ìƒì„±
>     1. for êµ¬ë¬¸ê³¼ ìŠ¬ë¼ì´ì‹± ì¸ë±ìŠ¤ë¥¼ ì´ìš©í•´ N * N ë°°ì—´ ìƒì„±
> 3. prefix_sum ë°°ì—´ ìƒì„±
>     1. ì²«í–‰, ì²«ì—´ì— 0ì„ í¬í•¨í•œ prefix_sumë°°ì—´ì„ ìƒì„±í•œë‹¤.
>     2. ì´ ë•Œ ìš°í•˜ë‹¨ì— ëˆ„ì í•©ì„ ê¸°ì¬í•œë‹¤.
>         1. ìš°í•˜ë‹¨ì˜ ê°’(ê¸°ì¤€) = í–‰(ê¸°ì¤€ - 1) + í–‰(ê¸°ì¤€ - 1) - ëŒ€ê°ì„ (ê¸°ì¤€ - 1)
> 4. ì¿¼ë¦¬ ì •ì˜
>     1. ì—¬ê¸°ì„œ ì¿¼ë¦¬ëŠ” ë¬´ì¡°ê±´ 4ê°œì˜ indexë¥¼ ìˆœí™˜
> 5. ê³„ì‚° í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ê²°ê³¼ê°’ ë„ì¶œ
>     1. x, y, i, j ì˜ ê°¯ìˆ˜ ë§Œí¼ ìˆœíšŒ
>     2. ì¿¼ë¦¬ë³„ ê²°ê³¼ê°’ : i, j ì˜ ëˆ„ì í•© - (i, y -1) - (x - 1, j) + (x - 1, y - 1)
> 6. í•¨ìˆ˜ì—ì„œ returnëœ ê°’ì„ ìˆœí™˜í•˜ì—¬ print
>     1. â€˜\nâ€™.jonin(map(str, results))ë¥¼ í†µí•´ ì¶œë ¥í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì´ëŠ” join í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ë¬¸ìì—´ë¡œ ë‹¤ì‹œ ì €ì¥í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ë¯€ë¡œ forâ€¦iní•¨ìˆ˜ë¥¼ í†µí•´ ì¶œë ¥í•˜ëŠ” ê²ƒì´ ë©”ëª¨ë¦¬ ì‚¬ìš©ì— ë”ìš± íš¨ìœ¨ì ì„.

## ì‚¬ìš©ëœ ì•Œê³ ë¦¬ì¦˜

> [!tip]
> ğŸ¨ algoritm
> prefix_sum(ëˆ„ì í•©)

---

# code

## Python

```python
import sys
input = sys.stdin.read()
data = list(map(int, input.split()))

# ì…ë ¥ê°’ ì •ì˜
idx = 0
N = data[0]  #ë°°ì—´ì˜ ê¸¸ì´
K = data[1]  #ì¿¼ë¦¬ ê°¯ìˆ˜
idx += 2

# ë°°ì—´ ìƒì„±
A = []
for i in range(N):
    row = data[idx : idx + N + 1]
    A.append(row)
    idx += N

# prefix_sum êµ¬ì¶•
prefix_sum = [[0] * (N + 1) for _ in range(N + 1)]
for i in range(1, N + 1):
    for j in range(1, N + 1):
        prefix_sum[i][j] = A[i - 1][j - 1] + prefix_sum[i - 1][j] + prefix_sum[i][j - 1] - prefix_sum[i - 1][j - 1]

# ì¿¼ë¦¬ ì •ì˜
queries = []
for _ in range(K):
    query = data[idx : idx + 4]
    queries.append(query)
    idx += 4

# ê³„ì‚° í•¨ìˆ˜
def array_sum(prefix_sum, queries):
    results = []
    for i, j, x, y in queries:
        result = prefix_sum[x][y] - prefix_sum[i - 1][y] - prefix_sum[x][j - 1] + prefix_sum[i - 1][j - 1]
        results.append(result)
    return results

results = array_sum(prefix_sum, queries)
for result in results:
    print(result)
```

## í•´ê²°í•œ ì˜¤ë¥˜

### 1. ì–•ì€ë³µì‚¬ë¡œ ì¸í•´ ëª¨ë“  ê°ì²´ì˜ ê°’ ë³€ê²½ ì´ìŠˆ

```python
A = []
for idx in range(2, N * N, 4):  # init of array 
    row = [data[idx], data[idx + 1], data[idx + 2], data[idx + 3]]
    A.append(row)

**# prefix_sum êµ¬ì¶• -> !!ì˜¤ë¥˜ ë°œìƒ ì§€ì !!
prefix_sum = [[0] * (N + 1)] * (N + 1)  # init prefix_sum
print(prefix_sum)**

for i in range(1, N + 1):
    for j in range(1, N + 1):
        prefix_sum[i][j] = A[i - 1][j - 1] + prefix_sum[i - 1][j] + prefix_sum[i][j - 1] - prefix_sum[i - 1][j - 1]

**print(prefix_sum)**
```

### ê²°ê³¼ : prefix_sumì˜ ëª¨ë“  ë°°ì—´ì´ ê°™ì€ ë°°ì—´ë¡œ ì¶œë ¥ëœë‹¤.

`[[0, 10, 14, 18, 22], [0, 10, 14, 18, 22], [0, 10, 14, 18, 22], [0, 10, 14, 18, 22], [0, 10, 14, 18, 22]]`

### ì´ìœ  : ì–•ì€ë³µì‚¬(í¬ì¸í„° ë³µì‚¬, ì£¼ì†Œê°’ ë³µì‚¬)

1. ë‹¨ì¼ë¦¬ìŠ¤íŠ¸ ìƒì„±
    1. `[[0] * (N + 1)]` ì„ í†µí•´ `[0, 0, 0, 0, 0]` ì´ë€ valueì™€ `[0, 1, 2, 3, 4]`ë¼ëŠ” keyë¥¼ ê°€ì§„ ë‹¨ì¼ ë¦¬ìŠ¤íŠ¸(ê°ì²´)ë¥¼ ìƒì„±í•œë‹¤.
    2. ì´ ë¦¬ìŠ¤íŠ¸ëŠ” ë©”ëª¨ë¦¬ì— ì €ì¥ëœ ë°ì´í„° ì˜ì—­ì˜ ë¶ˆë³€ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ëŠ” ì£¼ì†Œ(í¬ì¸í„°)ë¡œ ì €ì¥ëœë‹¤.
2. ë¦¬ìŠ¤íŠ¸ ì°¸ì¡° ë³µì‚¬
    1. ìœ„ ë¦¬ìŠ¤íŠ¸ë¥¼ (N + 1)ë²ˆ ë°˜ë³µí•˜ì—¬ ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“ ë‹¤.
    2. ì´ ê³¼ì •ì€ ë…ë¦½ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ë™ì¼í•œ ë¦¬ìŠ¤íŠ¸ ê°ì²´ë¥¼ ì°¸ì¡°í•˜ëŠ” ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ëŠ” ê²ƒ
3. ì–•ì€ ë³µì‚¬ ë©”ëª¨ë¦¬ ì €ì¥ í˜•íƒœ(ë„ì‹)
    
    ```
    +---------------------+
    |        ë³€ìˆ˜ì˜ì—­       |
    +---------------------+
    |         1001        |
    +---------------------+       =>      **N + 1 ë²ˆ ë³µì‚¬**
    | key : [[0]*(N + 1)] |               = **value : @5003 N + 1ë²ˆ ë³µì‚¬**
    +---------------------+
    |     value : @5003   |
    +---------------------+
    
    +---------------------+---------------------+---------------------+
    |                              ë°ì´í„°ì˜ì—­                            |
    +---------------------+---------------------+---------------------+
    |         5003        |         5004        |         5005        |
    +---------------------+---------------------+---------------------+
    |        @7003~       |           0         |           1         |
    +---------------------+---------------------+---------------------+
    
    +---------------------+---------------------+---------------------+
    |                               ë³€ìˆ˜ì˜ì—­                            |
    +---------------------+---------------------+---------------------+
    |         7003        |         7004        |         7005        |
    +---------------------+---------------------+---------------------+
    |     key : @5004     |     key : @5005     |     key : @5006     |
    +---------------------+---------------------+---------------------+
    |     value : @5004   |     value : @5004   |     value : @5004   |
    +---------------------+---------------------+---------------------+
    
    ```
    
4. ë”°ë¼ì„œ, prefix_sum[0][1] = 1 ë¡œ ë³€ê²½í•´ ë³´ë©´ prefix[n][1] = 1ë¡œë³€ê²½ë¨.
    
![image](https://github.com/user-attachments/assets/aa596226-123a-4240-968e-ec6165ffc3e7)
    
![image](https://github.com/user-attachments/assets/035fac54-7fe5-4289-b686-323ae3124f91)
    

### í•´ê²° ë°©ë²•

1. ê¹Šì€ ì£¼ì†Œ ë³µì‚¬ ì´ìš©
    1. ê° ìˆœí™˜ë§ˆë‹¤ ë¦¬ìŠ¤íŠ¸ê°€ ë…ë¦½ì ì¸ ê°ì²´ê°€ ë  ìˆ˜ ìˆë„ë¡ í•¨
        1. ìˆœí™˜ë¬¸ ì‚¬ìš©
            
            ```python
            prefix_sum = []
            for i in range(N + 1):
                prefix_sum.append([0] * (N + 1)]
            ```
            
        2. ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í•¸ì…˜ ì‚¬ìš© (list comprehension)
            
            ```python
            prefix_sum = [[0] * (N + 1) for _ in range(N + 1)]
            ```
            
2. ìˆœí™˜ì„ í†µí•´ ë§¤ë²ˆ ìƒˆë¡œìš´ ì°¸ì¡°ì˜ ë¦¬ìŠ¤íŠ¸ ìƒì„±
3. ê¹Šì€ ë³µì‚¬ ë©”ëª¨ë¦¬ ì €ì¥ í˜•íƒœ(ë„ì‹)
    
    ```
    +---------------------+---------------------+---------------------+
    |                               ë³€ìˆ˜ì˜ì—­                            |
    +---------------------+---------------------+---------------------+
    |         7003        |         7004        |         7005        |
    +---------------------+---------------------+---------------------+
    |key : [[0]*(N + 1)]-1|key : [[0]*(N + 1)]-2|key : [[0]*(N + 1)]-3|
    +---------------------+---------------------+---------------------+
    |     value : @5003   |     value : @5004   |     value : @5005   |
    +---------------------+---------------------+---------------------+
    
    +---------------------+---------------------+---------------------+
    |                              ë°ì´í„°ì˜ì—­                            |
    +---------------------+---------------------+---------------------+
    |         5003        |         5004        |         5005        |
    +---------------------+---------------------+---------------------+
    |        @7003~       |        @7008~       |        @7013~       |
    +---------------------+---------------------+---------------------+
    
    +---------------------+---------------------+---------------------+
    |                               ë³€ìˆ˜ì˜ì—­                            |
    +---------------------+---------------------+---------------------+
    |         7003        |         7008        |         7013        |
    +---------------------+---------------------+---------------------+
    |     key : @5005     |     key : @5005     |     key : @5005     |
    +---------------------+---------------------+---------------------+
    |     value : @5006   |     value : @5006   |     value : @5006   |
    +---------------------+---------------------+---------------------+
    
    ```
    
4. ë”°ë¼ì„œ, prefix_sum[0][1] = 1 ë¡œ ë³€ê²½ ì‹œ, prefix[0][1] = 1 ë¡œ ë³€ê²½ë¨.
    
![image](https://github.com/user-attachments/assets/2c590eac-fa12-4223-8a8a-5be990ff78fc)
    
![image](https://github.com/user-attachments/assets/c5ade37e-07f2-4b92-949a-958c9d44d429)
    

### ê²°ë¡  : ê¹Šì€ ë³µì‚¬ë¥¼ í•´ì•¼ ì„œë¡œ ë…ë¦½ë˜ê²Œ ë°ì´í„°ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.

ê²°ê³¼ê°’ë„ ì œëŒ€ë¡œ ë³€ê²½ëœë‹¤.

![image](https://github.com/user-attachments/assets/c223616a-2b8c-4151-9d26-5500f8993e24)

---

- ê¸°ì¡´ì½”ë“œ
    
    ```python
    import sys
    input = sys.stdin.read()
    data = list(map(int, input.split()))
    
    print(data)
    
    # dataì •ì˜
    N = data[0]  # size of array
    K = data[1]  # range of queries
    idx = 2
    
    A = []
    for idx in range(2, N * N, 4):  # init of array 
        row = [data[idx], data[idx + 1], data[idx + 2], data[idx + 3]]
        A.append(row)
    
    # prefix_sum êµ¬ì¶•
    prefix_sum = [[0] * (N + 1)] * (N + 1)  # init prefix_sum
    print(prefix_sum)
    
    for i in range(1, N + 1):
        for j in range(1, N + 1):
            prefix_sum[i][j] = A[i - 1][j - 1]
                             + prefix_sum[i - 1][j]
                             + prefix_sum[i][j - 1]
                             - prefix_sum[i - 1][j - 1]
    
    # ì¿¼ë¦¬ ê³„ì‚°
    queries = []
    for i in range(K):
        query = [data[idx], data[idx + 1], data[idx + 2], data[idx + 3]]
        queries.append(query)
        idx += 4
    
    results = []
    for i, j, x, y in queries:
        result = prefix_sum[x][y]
               - prefix_sum[i - 1][y]
               - prefix_sum[x][j - 1]
               + prefix_sum[i - 1][j - 1]
        results.append(result)
    
    for answer in results:
        print(answer)
    ```
    

---

[ì§ˆë¬¸ì €ì¥ì†Œ](https://www.notion.so/e89321c148364e51939899cbe96b4a4f?pvs=21)
